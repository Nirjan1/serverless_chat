<!DOCTYPE html>
<html>
<head>
    <title>Serverless Chat Simulation</title>
    <style>
        body { font-family: Arial; background:#f3f3f3; padding:20px; }
        #chatBox { width:100%; height:300px; overflow-y:scroll; background:white; border:1px solid #ccc; padding:10px; }
        #msgInput { width:80%; padding:10px; }
        #sendBtn { padding:10px 20px; }
    </style>
</head>
<body>

<h2>ðŸ”¥ Serverless Chat Simulation (Separate Files)</h2>

<div id="chatBox"></div>
<br>
<input id="msgInput" placeholder="Type your message..." />
<button id="sendBtn">Send</button>

<!-- Include backend JS -->
<script src="../backend/onConnect.js"></script>
<script src="../backend/onDisconnect.js"></script>
<script src="../backend/sendMessage.js"></script>

<script>
/* ===== Frontend Simulation ===== */

let userId = "user1"; // current user
onConnect(userId);    // simulate connection

function addMessage(msg){
    const box = document.getElementById("chatBox");
    box.innerHTML += msg + "<br>";
    box.scrollTop = box.scrollHeight;
}

document.getElementById("sendBtn").onclick = () => {
    const msgInput = document.getElementById("msgInput");
    const msg = msgInput.value.trim();
    if(!msg) return;

    // Send user message
    sendMessage(userId, msg, connections, addMessage);

    // Simulate automatic response from another user
    setTimeout(() => {
        const fakeResponse = msg.split('').reverse().join(''); // reversed text
        sendMessage("user2", fakeResponse, connections, addMessage);
    }, 800);

    msgInput.value = "";
};

</script>

</body>
</html>
